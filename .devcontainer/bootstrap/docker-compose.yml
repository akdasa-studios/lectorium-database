name: lectorium

services:
  database-bootstrap:
    hostname: database-bootstrap
    build:
      context: ../..
      dockerfile: .devcontainer/bootstrap/Dockerfile
      args:
        - USER_ID=${DEVCONTAINER_USER_ID:-1000}
        - USER_NAME=${DEVCONTAINER_USER_NAME:-dev}
        - GROUP_ID=${DEVCONTAINER_USER_GID:-100}
    volumes:
      - ../../modules/bootstrap:/akd-studios/lectorium
      - ../../.vscode:/akd-studios/lectorium/.vscode
    networks:
      - lectorium

  database:
    build:
      context: ../..
      dockerfile: modules/database/Dockerfile
    environment:
      - COUCHDB_USER=lectorium
      - COUCHDB_PASSWORD=lectorium
    ports:
      - "5984:5984"
    expose:
      - "5984"
    networks:
      - lectorium

networks:
  lectorium:
